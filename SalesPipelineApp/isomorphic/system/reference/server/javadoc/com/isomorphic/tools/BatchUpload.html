<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>BatchUpload (SmartClient Enterprise Server API 14.1p (2025-06-14))</title> <meta name="date" content="2025-06-14"> <link rel="stylesheet" type="text/css" href="../../../stylesheet_custom.css" title="Style"> <script type="text/javascript" src="../../../script.js"></script> </head> <body> <script type="text/javascript">try{if(location.href.indexOf("is-external=true")==-1){parent.document.title="BatchUpload (SmartClient Enterprise Server API 14.1p (2025-06-14))"}}catch(err){}var methods={i0:10,i1:10,i2:10};var tabs={65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};var altColor="altColor";var rowColor="rowColor";var tableTab="tableTab";var activeTableTab="activeTableTab";</script> <noscript> <div>JavaScript is disabled on your browser.</div> </noscript> <div class="topNav"><a name="navbar.top"> </a> <div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div> <a name="navbar.top.firstrow"> </a> <ul class="navList" title="Navigation"> <li><a href="../../../overview-summary.html">Overview</a></li> <li><a href="package-summary.html">Package</a></li> <li class="navBarCell1Rev">Class</li> <li><a href="package-tree.html">Tree</a></li> <li><a href="../../../deprecated-list.html">Deprecated</a></li> <li><a href="../../../index-all.html">Index</a></li> <li><a href="../../../help-doc.html">Help</a></li> </ul> </div> <div class="subNav"> <ul class="navList"> <li>Prev&nbsp;Class</li> <li><a href="../../../com/isomorphic/tools/BuiltinRPC.html" title="class in com.isomorphic.tools"><span class="typeNameLink">Next&nbsp;Class</span></a></li> </ul> <ul class="navList"> <li><a href="../../../index.html?com/isomorphic/tools/BatchUpload.html" target="_top">Frames</a></li> <li><a href="BatchUpload.html" target="_top">No&nbsp;Frames</a></li> </ul> <ul class="navList" id="allclasses_navbar_top"> <li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li> </ul> <div> <script type="text/javascript">allClassesLink=document.getElementById("allclasses_navbar_top");if(window==top){allClassesLink.style.display="block"}else{allClassesLink.style.display="none"};</script> </div> <div> <ul class="subNavList"> <li>Summary:&nbsp;</li> <li>Nested&nbsp;|&nbsp;</li> <li>Field&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method.summary">Method</a></li> </ul> <ul class="subNavList"> <li>Detail:&nbsp;</li> <li>Field&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method.detail">Method</a></li> </ul> </div> <a name="skip.navbar.top"> </a></div> <div class="header"> <div class="subTitle">com.isomorphic.tools</div> <h2 title="Class BatchUpload" class="title">Class BatchUpload</h2> </div> <div class="contentContainer"> <ul class="inheritance"> <li>java.lang.Object</li> <li> <ul class="inheritance"> <li><a href="../../../com/isomorphic/base/Base.html" title="class in com.isomorphic.base">com.isomorphic.base.Base</a></li> <li> <ul class="inheritance"> <li>com.isomorphic.tools.BatchUpload</li> </ul> </li> </ul> </li> </ul> <div class="description"> <ul class="blockList"> <li class="blockList"> <hr> <br> <pre>public class <span class="typeNameLabel">BatchUpload</span>
extends <a href="../../../com/isomorphic/base/Base.html" title="class in com.isomorphic.base">Base</a></pre> <div class="block">This class implements the server side of the BatchUploader tool. See the client-side docs for full details of this feature. <b>NOTE:</b> this feature is only available with a Power or better license.</div> </li> </ul> </div> <div class="summary"> <ul class="blockList"> <li class="blockList"> <ul class="blockList"> <li class="blockList"><a name="method.summary"> </a> <h3>Method Summary</h3> <table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation"> <caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption> <tr> <th class="colFirst" scope="col">Modifier and Type</th> <th class="colLast" scope="col">Method and Description</th> </tr> <tr id="i0" class="altColor"> <td class="colFirst"><code><a href="../../../com/isomorphic/datasource/DSResponse.html" title="class in com.isomorphic.datasource">DSResponse</a></code></td> <td class="colLast"><code><span class="memberNameLink"><a href="../../../com/isomorphic/tools/BatchUpload.html#batchUpload-com.isomorphic.datasource.DSRequest-">batchUpload</a></span>(<a href="../../../com/isomorphic/datasource/DSRequest.html" title="class in com.isomorphic.datasource">DSRequest</a>&nbsp;dsRequest)</code> <div class="block">Takes an DSRequest sent by the BatchUploader UI component, which contains an uploaded CSV file and target DataSource, and returns a DSResponse containing the rows validated against the target DataSource.</div> </td> </tr> <tr id="i1" class="rowColor"> <td class="colFirst"><code><a href="../../../com/isomorphic/datasource/DSResponse.html" title="class in com.isomorphic.datasource">DSResponse</a></code></td> <td class="colLast"><code><span class="memberNameLink"><a href="../../../com/isomorphic/tools/BatchUpload.html#parseUploadData-com.isomorphic.datasource.DSRequest-">parseUploadData</a></span>(<a href="../../../com/isomorphic/datasource/DSRequest.html" title="class in com.isomorphic.datasource">DSRequest</a>&nbsp;dsRequest)</code> <div class="block">Parses inbound <code>DSRequest</code> and returns <code>DSResponse</code> containing parsed uploaded data or error message if parsing failed.</div> </td> </tr> <tr id="i2" class="altColor"> <td class="colFirst"><code><a href="../../../com/isomorphic/datasource/DSResponse.html" title="class in com.isomorphic.datasource">DSResponse</a></code></td> <td class="colLast"><code><span class="memberNameLink"><a href="../../../com/isomorphic/tools/BatchUpload.html#validateUploadData-com.isomorphic.datasource.DSResponse-">validateUploadData</a></span>(<a href="../../../com/isomorphic/datasource/DSResponse.html" title="class in com.isomorphic.datasource">DSResponse</a>&nbsp;dsResponse)</code> <div class="block">Validates provided records against the target DataSource and returns DSResponse containing records to be imported and validation errors (if any).</div> </td> </tr> </table> </li> </ul> </li> </ul> </div> <div class="details"> <ul class="blockList"> <li class="blockList"> <ul class="blockList"> <li class="blockList"><a name="method.detail"> </a> <h3>Method Detail</h3> <a name="batchUpload-com.isomorphic.datasource.DSRequest-"> </a> <ul class="blockList"> <li class="blockList"> <h4>batchUpload</h4> <pre>public&nbsp;<a href="../../../com/isomorphic/datasource/DSResponse.html" title="class in com.isomorphic.datasource">DSResponse</a>&nbsp;batchUpload(<a href="../../../com/isomorphic/datasource/DSRequest.html" title="class in com.isomorphic.datasource">DSRequest</a>&nbsp;dsRequest)
                       throws java.lang.Exception</pre> <div class="block">Takes an DSRequest sent by the BatchUploader UI component, which contains an uploaded CSV file and target DataSource, and returns a DSResponse containing the rows validated against the target DataSource. <P> This API may only be used by the BatchUploader UI component. It is documented solely to allow pre- or post-processing checks to be added as a substitute DMI for the default DMI declared in <code>batchUpload.ds.xml</code>. <p> For checks involving the uploaded file, the binary field name is always "file" (so getUploadedFileStream("file") allows access to the uploaded CSV InputStream, just as it would for any other binary field named "file"). <P> For adding custom validation checks that could not be covered by standard per-field validation, subclass <code>DataSource</code> you are using and override <a href="../../../com/isomorphic/datasource/DataSource.html#validate-java.util.Map-com.isomorphic.util.ErrorReport-"><code>DataSource.validate(Map, ErrorReport)</code></a>. <P> There are scenarios when mentioned earlier pre- and post-processing approach is not enough. For example if uploaded data needs to be transformed in a certain way <b>before</b> initial validation. In this case, instead of calling <code>batchUpload()</code> method from a custom DMI, you should first call <a href="../../../com/isomorphic/tools/BatchUpload.html#parseUploadData-com.isomorphic.datasource.DSRequest-"><code>BatchUpload.parseUploadData(DSRequest)</code></a> to get access to the <code>DSResponse</code> holding uploaded data and make any transformations needed. Then pass this <code>DSResponse</code> holding transformed (may be as well unchanged) data to the <a href="../../../com/isomorphic/tools/BatchUpload.html#validateUploadData-com.isomorphic.datasource.DSResponse-"><code>BatchUpload.validateUploadData(DSResponse)</code></a> method, which will validate data against target DataSource and produce DSResponse for the BatchUploader UI. See example of how custom DMI may look like. Note that example also shows how to obtain dataSource name, which may be useful if performed transformations are dataSource specific: <P> <pre>
 public DSResponse batchUpload(DSRequest dsRequest) throws Exception {
     BatchUpload batchUpload = new BatchUpload();

     // parse data and get the result Map
     DSResponse response = batchUpload.parseUploadData(dsRequest);
     Map respData = response.getDataMap();
  
     // do not proceed to validation if parsing failed
     if (respData.containsKey("errorMessage")) return response;
     
     // get dataSource name 
     Map values = dsRequest.getValues();
     String dataSourceName = (String) values.get("dsName");
  
     // get upload data
     List&lt;Map&gt; uploadData = (List&lt;Map&gt;) respData.get("gridRows");
  
     // perform data manipulations
     ...
  
     // validate data and return
     return batchUpload.validateUploadData(response);
 }
 </pre> <P> <b>NOTE:</b> the BatchUploader feature as a whole is only available with a Power or better license.</div> <dl> <dt><span class="paramLabel">Parameters:</span></dt> <dd><code>dsRequest</code> - inbound DSRequest containing the uploaded CSV file</dd> <dt><span class="returnLabel">Returns:</span></dt> <dd>DSResponse containing the rows parsed from CSV, with validation errors if any</dd> <dt><span class="throwsLabel">Throws:</span></dt> <dd><code>java.lang.Exception</code> - if an exception occurs during validation</dd> </dl> </li> </ul> <a name="parseUploadData-com.isomorphic.datasource.DSRequest-"> </a> <ul class="blockList"> <li class="blockList"> <h4>parseUploadData</h4> <pre>public&nbsp;<a href="../../../com/isomorphic/datasource/DSResponse.html" title="class in com.isomorphic.datasource">DSResponse</a>&nbsp;parseUploadData(<a href="../../../com/isomorphic/datasource/DSRequest.html" title="class in com.isomorphic.datasource">DSRequest</a>&nbsp;dsRequest)
                           throws java.lang.Exception</pre> <div class="block">Parses inbound <code>DSRequest</code> and returns <code>DSResponse</code> containing parsed uploaded data or error message if parsing failed. These can be accessed via <code>DSResponse.getData()</code>, which in this case will always be a <code>Map</code> holding error message under the <code>"errorMessage"</code> key and parsed data under the <code>"gridRows"</code> key. <P> Note: in order to keep BatchUploader UI working as expected, do not change the top-level structure of this <code>Map</code>.</div> <dl> <dt><span class="paramLabel">Parameters:</span></dt> <dd><code>dsRequest</code> - inbound DSRequest containing the uploaded CSV file</dd> <dt><span class="returnLabel">Returns:</span></dt> <dd>DSResponse containing parsed upload data from CSV</dd> <dt><span class="throwsLabel">Throws:</span></dt> <dd><code>java.lang.Exception</code> - if an exception occurs during parsing</dd> </dl> </li> </ul> <a name="validateUploadData-com.isomorphic.datasource.DSResponse-"> </a> <ul class="blockListLast"> <li class="blockList"> <h4>validateUploadData</h4> <pre>public&nbsp;<a href="../../../com/isomorphic/datasource/DSResponse.html" title="class in com.isomorphic.datasource">DSResponse</a>&nbsp;validateUploadData(<a href="../../../com/isomorphic/datasource/DSResponse.html" title="class in com.isomorphic.datasource">DSResponse</a>&nbsp;dsResponse)
                              throws java.lang.Exception</pre> <div class="block">Validates provided records against the target DataSource and returns DSResponse containing records to be imported and validation errors (if any).</div> <dl> <dt><span class="paramLabel">Parameters:</span></dt> <dd><code>dsResponse</code> - returned by <a href="../../../com/isomorphic/tools/BatchUpload.html#parseUploadData-com.isomorphic.datasource.DSRequest-"><code>BatchUpload.parseUploadData(DSRequest)</code></a> holding parsed upload data</dd> <dt><span class="returnLabel">Returns:</span></dt> <dd>DSResponse containing the rows parsed from CSV, with validation errors if any</dd> <dt><span class="throwsLabel">Throws:</span></dt> <dd><code>java.lang.Exception</code> - if an exception occurs during validation</dd> </dl> </li> </ul> </li> </ul> </li> </ul> </div> </div> <div class="bottomNav"><a name="navbar.bottom"> </a> <div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div> <a name="navbar.bottom.firstrow"> </a> <ul class="navList" title="Navigation"> <li><a href="../../../overview-summary.html">Overview</a></li> <li><a href="package-summary.html">Package</a></li> <li class="navBarCell1Rev">Class</li> <li><a href="package-tree.html">Tree</a></li> <li><a href="../../../deprecated-list.html">Deprecated</a></li> <li><a href="../../../index-all.html">Index</a></li> <li><a href="../../../help-doc.html">Help</a></li> </ul> </div> <div class="subNav"> <ul class="navList"> <li>Prev&nbsp;Class</li> <li><a href="../../../com/isomorphic/tools/BuiltinRPC.html" title="class in com.isomorphic.tools"><span class="typeNameLink">Next&nbsp;Class</span></a></li> </ul> <ul class="navList"> <li><a href="../../../index.html?com/isomorphic/tools/BatchUpload.html" target="_top">Frames</a></li> <li><a href="BatchUpload.html" target="_top">No&nbsp;Frames</a></li> </ul> <ul class="navList" id="allclasses_navbar_bottom"> <li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li> </ul> <div> <script type="text/javascript">allClassesLink=document.getElementById("allclasses_navbar_bottom");if(window==top){allClassesLink.style.display="block"}else{allClassesLink.style.display="none"};</script> </div> <div> <ul class="subNavList"> <li>Summary:&nbsp;</li> <li>Nested&nbsp;|&nbsp;</li> <li>Field&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method.summary">Method</a></li> </ul> <ul class="subNavList"> <li>Detail:&nbsp;</li> <li>Field&nbsp;|&nbsp;</li> <li>Constr&nbsp;|&nbsp;</li> <li><a href="#method.detail">Method</a></li> </ul> </div> <a name="skip.navbar.bottom"> </a></div> </body> </html>